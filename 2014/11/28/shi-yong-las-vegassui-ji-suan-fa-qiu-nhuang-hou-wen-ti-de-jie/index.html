<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8">
  
  <title>使用Las Vegas随机算法求N皇后问题的解 | Hexo</title>
  <meta name="author" content="John Doe">

  
  <meta name="description" content="#include&amp;lt;stdio.h&amp;gt;
#include&amp;lt;stdlib.h&amp;gt;
#include&amp;lt;time.h&amp;gt;

#define bool int
#define true 1
#define false 0

#define DIM 50 

int uniform">
  
  

  <link rel="alternate" href="/atom.xml" title="Hexo" type="application/atom+xml">
  <link rel="stylesheet" href="/css/style.css" media="screen" type="text/css">
  <!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8/jquery.min.js"></script>
  
</head>

<body>
  <header id="header" class="inner"><nav>
  <ul>
    
      <li><a href="/">Home</a></li>
    
      <li><a href="/archives">Archives</a></li>
    
  </ul>
</nav></header>
  <div id="content" class="inner"><article class="post">
  
    <div class="gallery">
  <div class="photoset">
    
      <img src="">
    
  </div>
  <div class="control">
    <div class="prev"></div>
    <div class="next"></div>
  </div>
</div>
  
  <header>
    
  
    <h1 class="title">使用Las Vegas随机算法求N皇后问题的解</h1>
  

    <time datetime="2014-11-29T06:23:07.000Z">
  <span class="day">28</span><span class="month">Nov</span>
</time>
  </header>
  <div class="entry-content">
    
      <pre><code><span class="preprocessor">#<span class="keyword">include</span><span class="string">&lt;stdio.h&gt;</span></span>
<span class="preprocessor">#<span class="keyword">include</span><span class="string">&lt;stdlib.h&gt;</span></span>
<span class="preprocessor">#<span class="keyword">include</span><span class="string">&lt;time.h&gt;</span></span>

<span class="preprocessor">#<span class="keyword">define</span> bool int</span>
<span class="preprocessor">#<span class="keyword">define</span> true <span class="number">1</span></span>
<span class="preprocessor">#<span class="keyword">define</span> false <span class="number">0</span></span>

<span class="preprocessor">#<span class="keyword">define</span> DIM <span class="number">50</span> </span>

<span class="function"><span class="keyword">int</span> <span class="title">uniform</span><span class="params">(<span class="keyword">int</span> n)</span></span>{   <span class="comment">//random function</span>
    <span class="keyword">double</span> r;
    <span class="keyword">if</span>(n&lt;=<span class="number">0</span>)
    <span class="keyword">return</span> -<span class="number">1</span>;
    r=rand();
    <span class="keyword">return</span> (<span class="keyword">int</span>)(r/RAND_MAX*(n-<span class="number">1</span>))+<span class="number">1</span>;
}

<span class="function"><span class="keyword">bool</span> <span class="title">QueensLv</span><span class="params">(<span class="keyword">int</span> <span class="keyword">try</span>[])</span></span>{   <span class="comment">//LV算法解决N皇后问题</span>
    <span class="keyword">int</span> index,nb;
    <span class="keyword">int</span> col,randcol;
    <span class="keyword">bool</span> conflict=<span class="literal">false</span>;
    <span class="keyword">int</span> row=<span class="number">0</span>;
    <span class="keyword">bool</span> success=<span class="literal">false</span>;

    <span class="keyword">do</span> {   <span class="comment">//从第一行开始</span>
        nb=<span class="number">0</span>;    <span class="comment">////计数器，nb值为（row)th皇后的open位置总数</span>
        <span class="keyword">for</span>(col=<span class="number">0</span>;col&lt;DIM;col++){   <span class="comment">//从第一列开始</span>
            conflict = <span class="literal">false</span>;
            <span class="keyword">for</span>(index=<span class="number">0</span>;index&lt;row;index++){
                <span class="keyword">if</span>(<span class="keyword">try</span>[index]==col||<span class="built_in">abs</span>(col-<span class="keyword">try</span>[index])==(row-index))   <span class="comment">//测试(row,col)是否冲突</span>
                conflict=<span class="literal">true</span>;
            }
            <span class="keyword">if</span>(conflict==<span class="literal">false</span>){   <span class="comment">//是安全的</span>
                nb=nb+<span class="number">1</span>;
                <span class="keyword">if</span>(uniform(nb)==<span class="number">1</span>)  <span class="comment">//或许放在第col列</span>
                    randcol=col;   <span class="comment">//注意第一次uniform一定返回1，即j一定有值</span>
            }  <span class="comment">//endif</span>
        } <span class="comment">//enddo,</span>

        <span class="keyword">if</span>(nb &gt;<span class="number">0</span> ){   <span class="comment">//nb=0时无安全位置，第row皇后尚未放好</span>
                    <span class="comment">//在所有nb个安全位置上，(row)th皇后选择位置j的概率为1/nb</span>
            <span class="keyword">try</span>[row] = randcol;
        }
        row++;
    }<span class="keyword">while</span>(nb != <span class="number">0</span>&amp;&amp;row &lt; DIM); <span class="comment">//当前皇后找不到合适的位置或try是</span>
                               <span class="comment">// DIM-promising时结束.</span>
    <span class="keyword">if</span>(nb &gt; <span class="number">0</span>)
        success = <span class="literal">true</span>;
    <span class="keyword">else</span> 
        success = <span class="literal">false</span>;
    <span class="keyword">return</span> success;
}

<span class="function"><span class="keyword">int</span> <span class="title">SovleQueen</span><span class="params">()</span></span>{   <span class="comment">//不断调用LV算法直至成功</span>
    <span class="keyword">bool</span> success;
    <span class="keyword">int</span> chess[DIM];
    <span class="keyword">int</span> row;
    <span class="keyword">int</span> i;
    <span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;DIM;i++)chess[i]=-<span class="number">1</span>;
    <span class="keyword">do</span>{
        success = QueensLv(chess);
    }<span class="keyword">while</span>(success!=<span class="literal">true</span>);
    <span class="keyword">for</span>(row = <span class="number">0</span>;row&lt;DIM;row++){
        <span class="comment">//printf("%d ",chess[row]);</span>
        <span class="keyword">for</span>(i = <span class="number">0</span>; i &lt; chess[row]; i++)<span class="built_in">printf</span>(<span class="string">"."</span>);
        <span class="built_in">printf</span>(<span class="string">"X"</span>);
        <span class="keyword">for</span>(i=chess[row]+<span class="number">1</span>;i&lt;DIM;i++)<span class="built_in">printf</span>(<span class="string">"."</span>);
        <span class="built_in">printf</span>(<span class="string">"\n"</span>);
    }
}

<span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span> argc,<span class="keyword">char</span> **argv)</span></span>{
    <span class="keyword">int</span> index,j;
    <span class="keyword">clock_t</span> start,end;
    <span class="keyword">double</span> dur;
    srand(time(<span class="number">0</span>));
    start = clock();
    SovleQueen();
    end = clock();
    dur = <span class="number">1000.0</span>*(end-start)/CLOCKS_PER_SEC;
    <span class="built_in">printf</span>(<span class="string">"used: %f ms.\n"</span>,dur);

}
</code></pre>
    
    
    <footer class="meta">
      
      
  <div class="tags">
<a href="/tags/随机算法/">
- 随机算法</a></div>

      
    </footer>
    
  </div>
  
</article></div>
  <footer id="footer" class="inner"><div class="social alignright">
  
  
  
  
  <a class="rss" href="/atom.xml" title="RSS">RSS</a>
</div>
<p>
  
  &copy; 2015 John Doe
  
</p>
<div class="clearfix"></div></footer>
  <script src="/js/jquery.imagesloaded.min.js"></script>
<script src="/js/gallery.js"></script>




<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
(function($){
  $('.fancybox').fancybox();
})(jQuery);
</script>


<div id="phasebeam">
  <canvas></canvas>
  <canvas></canvas>
  <canvas></canvas>
</div>
<script src="/js/phasebeam.js"></script>
</body>
</html>